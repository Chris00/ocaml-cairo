<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Glyph (cairo2.Cairo.Glyph)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">cairo2</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Cairo.Glyph</span></h1></header><div class="doc"><p>This is Cairo low-level text API. The low-level API relies on the
user to convert text to a set of glyph indexes and positions. This is
a very hard problem and is best handled by external libraries, like
the pangocairo that is part of the Pango text layout and rendering
library. Pango is available from http://www.pango.org/</p><p>See also the <a href="../index.html#text_toy">&quot;Toy&quot; text API</a>.</p></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-t.index" class="anchored"><td class="def field"><a href="#type-t.index" class="anchor"></a><code>index : int;</code></td><td class="doc"><p>(** glyph index in the font. The exact interpretation
of the glyph index depends on the font technology
being used. *)</p></td></tr><tr id="type-t.x" class="anchored"><td class="def field"><a href="#type-t.x" class="anchor"></a><code>x : float;</code></td><td class="doc"><p>(** the offset in the X direction between the origin
used for drawing or measuring the string and the
origin of this glyph. *)</p></td></tr><tr id="type-t.y" class="anchored"><td class="def field"><a href="#type-t.y" class="anchor"></a><code>y : float;</code></td><td class="doc"><p>(** the offset in the Y direction between the origin
used for drawing or measuring the string and the
origin of this glyph. *)</p></td></tr></table><code>}</code><code></code></div><div class="doc"><p>The <code class="code">Glyph.t</code> structure holds information about a single glyph
when drawing or measuring text. A font is (in simple terms) a
collection of shapes used to draw text. A glyph is one of these
shapes. There can be multiple glyphs for a single character
(alternates to be used in different contexts, for example), or a
glyph can be a ligature of multiple characters. Cairo doesn't
expose any way of converting input text into glyphs, so in order
to use the Cairo interfaces that take arrays of glyphs, you must
directly access the appropriate underlying font system.</p><p>Note that the offsets given by x and y are not cumulative. When
drawing or measuring text, each glyph is individually positioned
with respect to the overall origin.</p></div></div><div class="spec type" id="type-cluster"><a href="#type-cluster" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>cluster</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-cluster.num_bytes" class="anchored"><td class="def field"><a href="#type-cluster.num_bytes" class="anchor"></a><code>num_bytes : int;</code></td><td class="doc"><p>(** the number of bytes of UTF-8 text covered by cluster *)</p></td></tr><tr id="type-cluster.num_glyphs" class="anchored"><td class="def field"><a href="#type-cluster.num_glyphs" class="anchor"></a><code>num_glyphs : int;</code></td><td class="doc"><p>(** the number of glyphs covered by cluster *)</p></td></tr></table><code>}</code><code></code></div><div class="doc"><p>The <code class="code">cluster</code> record holds information about a single <i>text
cluster</i>. A text cluster is a minimal mapping of some glyphs
corresponding to some UTF-8 text.</p><p>For a cluster to be valid, both <code class="code">num_bytes</code> and <code class="code">num_glyphs</code>
should be non-negative, and at least one should be non-zero.
Note that clusters with zero glyphs are not as well supported as
normal clusters. For example, PDF rendering applications
typically ignore those clusters when PDF text is being selected.</p><p>See <a href="index.html#val-show_text">Cairo.Glyph.show_text</a> for how clusters are used in
advanced text operations.</p></div></div><div class="spec type" id="type-cluster_flags"><a href="#type-cluster_flags" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>cluster_flags</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-cluster_flags.BACKWARD" class="anchored"><td class="def constructor"><a href="#type-cluster_flags.BACKWARD" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">BACKWARD</span></code></td><td class="doc"><p>(** The clusters in the cluster array map to glyphs in
the glyph array from end to start. *)</p></td></tr></table><code></code></div><div class="doc"><p>Specifies properties of a text cluster mapping.</p></div></div><div class="spec val" id="val-extents"><a href="#val-extents" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>extents : <a href="../index.html#type-context">context</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> array <span class="keyword">&#8209;&gt;</span> <a href="../index.html#type-text_extents">text_extents</a></code></div><div class="doc"><p>Gets the extents for an array of glyphs. The extents describe a
user-space rectangle that encloses the &quot;inked&quot; portion of the
glyphs (as they would be drawn by <a href="index.html#val-show">Cairo.Glyph.show</a>).
Additionally, the <code class="code">x_advance</code> and <code class="code">y_advance</code> values indicate the
amount by which the current point would be advanced by
<a href="index.html#val-show">Cairo.Glyph.show</a>.</p><p>Note that whitespace glyphs do not contribute to the size of
the rectangle (extents.width and extents.height).</p></div></div><div class="spec val" id="val-show"><a href="#val-show" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>show : <a href="../index.html#type-context">context</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> array <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>A drawing operator that generates the shape from an array of
glyphs, rendered according to the current font face, font size
(font matrix), and font options.</p></div></div><div class="spec val" id="val-show_text"><a href="#val-show_text" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>show_text : <a href="../index.html#type-context">context</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> array <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-cluster">cluster</a> array <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-cluster_flags">cluster_flags</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">show_text cr utf8 glyphs clusters cluster_flags</code>: This
operation has rendering effects similar to <a href="index.html#val-show">Cairo.Glyph.show</a>
but, if the target surface supports it, uses the provided text
and cluster mapping to embed the text for the glyphs shown in the
output. If the target does not support the extended attributes,
this function acts like the basic <a href="index.html#val-show">Cairo.Glyph.show</a> as if it
had been passed <code class="code">glyphs</code>.</p><p>The mapping between <code class="code">utf8</code> and <code class="code">glyphs</code> is provided by an
array of <code class="code">clusters</code>. Each cluster covers a number of text bytes
and glyphs, and neighboring clusters cover neighboring areas of
<code class="code">utf8</code> and <code class="code">glyphs</code>. The clusters should collectively cover
<code class="code">utf8</code> and <code class="code">glyphs</code> in entirety.</p><p>The first cluster always covers bytes from the beginning of
<code class="code">utf8</code>. If <code class="code">cluster_flags</code> do not have the <code class="code">BACKWARD</code> set, the
first cluster also covers the beginning of glyphs, otherwise it
covers the end of the glyphs array and following clusters move
backward.</p><p>See <a href="index.html#type-cluster">Cairo.Glyph.cluster</a> for constraints on valid clusters.</p></div></div></body></html>