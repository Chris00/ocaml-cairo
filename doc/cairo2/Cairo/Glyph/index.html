<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Glyph (cairo2.Cairo.Glyph)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v2.3.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">cairo2</a> &#x00BB; <a href="../index.html">Cairo</a> &#x00BB; Glyph</nav><header class="odoc-preamble"><h1>Module <code><span>Cairo.Glyph</span></code></h1><p>This is Cairo low-level text API. The low-level API relies on the user to convert text to a set of glyph indexes and positions. This is a very hard problem and is best handled by external libraries, like the pangocairo that is part of the Pango text layout and rendering library. Pango is available from http://www.pango.org/</p><p>See also the <a href="../index.html#text_toy" title="text_toy">&quot;Toy&quot; text API</a>.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><ol><li id="type-t.index" class="def record field anchored"><a href="#type-t.index" class="anchor"></a><code><span>index : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>glyph index in the font. The exact interpretation of the glyph index depends on the font technology being used.</p><span class="comment-delim">*)</span></div></li><li id="type-t.x" class="def record field anchored"><a href="#type-t.x" class="anchor"></a><code><span>x : float;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>the offset in the X direction between the origin used for drawing or measuring the string and the origin of this glyph.</p><span class="comment-delim">*)</span></div></li><li id="type-t.y" class="def record field anchored"><a href="#type-t.y" class="anchor"></a><code><span>y : float;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>the offset in the Y direction between the origin used for drawing or measuring the string and the origin of this glyph.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The <code>Glyph.t</code> structure holds information about a single glyph when drawing or measuring text. A font is (in simple terms) a collection of shapes used to draw text. A glyph is one of these shapes. There can be multiple glyphs for a single character (alternates to be used in different contexts, for example), or a glyph can be a ligature of multiple characters. Cairo doesn't expose any way of converting input text into glyphs, so in order to use the Cairo interfaces that take arrays of glyphs, you must directly access the appropriate underlying font system.</p><p>Note that the offsets given by x and y are not cumulative. When drawing or measuring text, each glyph is individually positioned with respect to the overall origin.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-cluster"><a href="#type-cluster" class="anchor"></a><code><span><span class="keyword">type</span> cluster</span><span> = </span><span>{</span></code><ol><li id="type-cluster.num_bytes" class="def record field anchored"><a href="#type-cluster.num_bytes" class="anchor"></a><code><span>num_bytes : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>the number of bytes of UTF-8 text covered by cluster</p><span class="comment-delim">*)</span></div></li><li id="type-cluster.num_glyphs" class="def record field anchored"><a href="#type-cluster.num_glyphs" class="anchor"></a><code><span>num_glyphs : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>the number of glyphs covered by cluster</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The <code>cluster</code> record holds information about a single <i>text cluster</i>. A text cluster is a minimal mapping of some glyphs corresponding to some UTF-8 text.</p><p>For a cluster to be valid, both <code>num_bytes</code> and <code>num_glyphs</code> should be non-negative, and at least one should be non-zero. Note that clusters with zero glyphs are not as well supported as normal clusters. For example, PDF rendering applications typically ignore those clusters when PDF text is being selected.</p><p>See <a href="#val-show_text"><code>Cairo.Glyph.show_text</code></a> for how clusters are used in advanced text operations.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-cluster_flags"><a href="#type-cluster_flags" class="anchor"></a><code><span><span class="keyword">type</span> cluster_flags</span><span> = </span></code><ol><li id="type-cluster_flags.BACKWARD" class="def variant constructor anchored"><a href="#type-cluster_flags.BACKWARD" class="anchor"></a><code><span>| </span><span><span class="constructor">BACKWARD</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The clusters in the cluster array map to glyphs in the glyph array from end to start.</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Specifies properties of a text cluster mapping.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extents"><a href="#val-extents" class="anchor"></a><code><span><span class="keyword">val</span> extents : <span><a href="../index.html#type-context">context</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-t">t</a> array</span> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-text_extents">text_extents</a></span></code></div><div class="spec-doc"><p>Gets the extents for an array of glyphs. The extents describe a user-space rectangle that encloses the &quot;inked&quot; portion of the glyphs (as they would be drawn by <a href="#val-show"><code>Cairo.Glyph.show</code></a>). Additionally, the <code>x_advance</code> and <code>y_advance</code> values indicate the amount by which the current point would be advanced by <a href="#val-show"><code>Cairo.Glyph.show</code></a>.</p><p>Note that whitespace glyphs do not contribute to the size of the rectangle (extents.width and extents.height).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show"><a href="#val-show" class="anchor"></a><code><span><span class="keyword">val</span> show : <span><a href="../index.html#type-context">context</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-t">t</a> array</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>A drawing operator that generates the shape from an array of glyphs, rendered according to the current font face, font size (font matrix), and font options.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_text"><a href="#val-show_text" class="anchor"></a><code><span><span class="keyword">val</span> show_text : 
  <span><a href="../index.html#type-context">context</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-t">t</a> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-cluster">cluster</a> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-cluster_flags">cluster_flags</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>show_text cr utf8 glyphs clusters cluster_flags</code>: This operation has rendering effects similar to <a href="#val-show"><code>Cairo.Glyph.show</code></a> but, if the target surface supports it, uses the provided text and cluster mapping to embed the text for the glyphs shown in the output. If the target does not support the extended attributes, this function acts like the basic <a href="#val-show"><code>Cairo.Glyph.show</code></a> as if it had been passed <code>glyphs</code>.</p><p>The mapping between <code>utf8</code> and <code>glyphs</code> is provided by an array of <code>clusters</code>. Each cluster covers a number of text bytes and glyphs, and neighboring clusters cover neighboring areas of <code>utf8</code> and <code>glyphs</code>. The clusters should collectively cover <code>utf8</code> and <code>glyphs</code> in entirety.</p><p>The first cluster always covers bytes from the beginning of <code>utf8</code>. If <code>cluster_flags</code> do not have the <code>BACKWARD</code> set, the first cluster also covers the beginning of glyphs, otherwise it covers the end of the glyphs array and following clusters move backward.</p><p>See <a href="#type-cluster"><code>Cairo.Glyph.cluster</code></a> for constraints on valid clusters.</p></div></div></div></body></html>
